import React, { PureComponent } from 'react';
import Chat, { IChatProps } from '@/components/Chat';


interface IProps extends IConnectProps {
	location: {
		query: {
			targetId,
		}
	}
}

class Index extends PureComponent<IProps> {

	state: IChatProps = {
		fromUser: null,
		toUser: null,
		msgs: null,
	}

	componentDidMount() {
		const { location: { query: {targetId}} } = this.props;
		console.debug(targetId);
		this.setState({
			toUser: {
				id: targetId,
    			username: 'toUser',
			},
			fromUser: {
				id: 1,
				username: 'fromUser',
			},
			msgs: [],
		})
	}

	render() {
		const { toUser, fromUser } = this.state;
		const msgs = [{
			id: 1,
			userId: 1,
			groupId: 1,
			createTime: '2020-04-15 13:44:00',
			content: 'test1',
		}, {
			id: 2,
			userId: 1,
			groupId: 1,
			createTime: '2020-04-15 13:44:00',
			content: 'test2',
		}, {
			id: 3,
			userId: 2,
			groupId: 1,
			createTime: '2020-04-15 13:44:00',
			content: 'test3',
		}];

		if(!fromUser || !toUser ) {
			return null;
		}

		return (
			<Chat msgs={msgs} fromUser={fromUser} toUser={toUser} />
		);
	}
}

export default Index;
